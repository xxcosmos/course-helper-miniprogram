<wxs src="../../wxs/utils.wxs" module="filters" />


<wux-fab-button actionRotate="{{ false }}" bind:change="goToComment" bind:click="onClick" buttons="{{ buttons }}"
                theme="assertive"/>

<van-panel title="{{course.courseName}}" desc="课程代码：{{course.courseCode}}" status="{{course.courseType==1?'必修':'选修'}}">

    <van-panel>
        <view slot="header">
            <van-row>
                <van-col>
                    课程评分
                </van-col>
                <van-col>
                    <van-rate readonly value="{{ courseGrade }}"/>
                </van-col>
                <van-col>123人已评价</van-col>

            </van-row>
        </view>
    </van-panel>

    <van-collapse bind:change="onChangeCollapse" value="{{activeNames}}">

        <van-collapse-item name="1" title="课程信息">
            <van-cell-group>
                <van-cell icon="smile-o" title="学分：" value="{{course.courseCredit}}"/>
                <van-cell icon="smile-o" title="总学时：" value="{{course.courseHour}}"/>
                <van-cell icon="smile-o" title="课程类别：" value="{{course.courseTypeName}}"/>
                <van-cell icon="smile-o" title="开课单位： " value="{{course.unitName}}"/>
            </van-cell-group>
        </van-collapse-item>

        <block wx:if="{{teacherList!=null}}">
            <van-collapse-item name="2" title="授课教师列表">
                <van-cell-group>
                    <block wx:for="{{teacherList}}" wx:key="teacherName">
                        <van-cell icon="smile-o" label="{{item.teacherName}}" title="姓名："
                                  value="平均分：{{filters.toFix(item.average)}}"/>
                    </block>
                </van-cell-group>
            </van-collapse-item>
        </block>

    </van-collapse>


    <van-panel>
        <van-row>
            <van-col offset="8" span="8">
                <van-icon bind:click="goToFile" name="description" size="40px"/>
            </van-col>
            <van-col span="8">
                <van-icon bind:click="goToPhoto" name="photo-o" size="40px"/>
            </van-col>
        </van-row>
    </van-panel>


    <van-panel title="课程评价">

        <van-card wx:for="{{commentList}}" wx:key="comment.id">
            <view slot="thumb">
                <avatar scale size="large" src="{{item.userVO.avatarUrl}}"/>
            </view>
            <view slot="title">
                <van-row>
                    <van-col> {{item.userVO.nickname}}</van-col>
                    <van-col offset="2">
                        <van-tag plain type="danger" wx:if="{{item.userVO.state==1}}">认证用户</van-tag>
                    </van-col>
                    <van-col offset="11">
                        <wux-timeago to="{{item.comment.createTime}}"/>
                    </van-col>
                </van-row>
            </view>
            <view slot="desc">
                {{item.comment.content}} {{item.comment.star}}

            </view>


            <view slot="footer">
                <view wx:if="{{item.like==true}}">
                    <van-icon bind:click="onLike" data-id='{{item.comment.id}}' data-index='{{index}}'
                              info="{{item.comment.likeNum}}"
                              name="https://inwust-1251756217.cos.ap-chengdu.myqcloud.com/like_highlight.png"/>
                </view>
                <view wx:else>
                    <van-icon bind:click="onLike" data-id='{{item.comment.id}}' data-index='{{index}}'
                              info="{{item.comment.likeNum}}"
                              name="https://inwust-1251756217.cos.ap-chengdu.myqcloud.com/like_plain.png"/>
                </view>

            </view>
        </van-card>
    </van-panel>
</van-panel>