<wxs src="../../wxs/utils.wxs" module="filters" />
<van-search bind:cancel="onCancel" bind:change="onChange" bind:clear="onClear" bind:search="onSearch" focus show-action
            value="{{searchValue}}"/>

<block wx:if="{{courseList!=null}}">
  <!-- 搜索筛选 -->
  <block wx:for="{{courseList}}" wx:key="courseCode">
    <view bindtap="goToCourse" data-code="{{item.courseCode}}">
        <van-card desc="{{item.unitName}}" title="{{item.courseName}}">

        <!--课程属性标签 -->
        <view slot="tags">
          <van-tag mark type="danger">{{item.courseType==1?"必修":"选修"}}</van-tag>
        </view>
        <view slot="thumb">
          <avatar scale size="large" body-style="background-color: #11c1f3">{{filters.subStr(item.courseName,0,1)}}</avatar>
        </view>
      </van-card>
    </view>
  </block>
</block>
<block wx:else>
    <block wx:if="{{searchHistory!=null}}">
        <van-panel>
            <van-row gutter="5">
                <block wx:for="{{searchHistory}}" wx:key="item">
                    <view data-history='{{item}}' ontap="getHistory">
                        <van-col>
                            <van-tag plain size="large" type="danger">{{item}}</van-tag>
                        </van-col>
                    </view>
                </block>
            </van-row>
            <van-button bind:click="clearHistory" size="large">清除搜索历史</van-button>
        </van-panel>
    </block>
</block>